{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.Hosting.Lifetime": "Information",
      "Microsoft.EntityFrameworkCore": "Warning"
    }
  },
  
  "_comment_keyvault": "Key Vault configuration - secrets are loaded from Azure Key Vault in production",
  "KeyVault": {
    "VaultUri": "",
    "UseKeyVault": false,
    "UseMockKeyVault": true,
    "LocalSecretsPath": "secrets.local.json",
    "SecretPrefix": "",
    "TimeoutSeconds": 30,
    "ThrowOnUnavailable": false,
    "PreloadSecrets": [],
    "ReloadOnChange": true
  },
  
  "_comment_connection_strings": "Connection strings - actual values come from Key Vault or user-secrets",
  "ConnectionStrings": {
    "DefaultConnection": "<FROM_KEY_VAULT_OR_USER_SECRETS>"
  },
  "UseSqlServer": false,
  
  "_comment_azure": "Azure service configuration - API keys and connection strings come from Key Vault",
  "Azure": {
    "OpenAI": {
      "Endpoint": "<FROM_KEY_VAULT_OR_USER_SECRETS>",
      "ApiKey": "<FROM_KEY_VAULT_OR_USER_SECRETS>",
      "DeploymentName": "gpt-4"
    },
    "Storage": {
      "ConnectionString": "<FROM_KEY_VAULT_OR_USER_SECRETS>"
    },
    "Queue": {
      "ConnectionString": "<FROM_KEY_VAULT_OR_USER_SECRETS>"
    }
  },
  
  "_comment_ai": "AI Provider Configuration - Local (Ollama) or Azure OpenAI",
  "AI": {
    "Provider": "Local",
    "Local": {
      "OllamaUrl": "http://127.0.0.1:11434",
      "LLMModel": "qwen2.5-coder:7b",
      "EmbeddingModel": "bge-large-en-v1.5",
      "TimeoutSeconds": 120,
      "MaxRetries": 3,
      "Temperature": 0.3,
      "MaxTokens": 4096
    },
    "Azure": {
      "Endpoint": "<FROM_KEY_VAULT_OR_USER_SECRETS>",
      "ApiKey": "<FROM_KEY_VAULT_OR_USER_SECRETS>",
      "LLMDeployment": "gpt-4",
      "EmbeddingDeployment": "text-embedding-ada-002",
      "TimeoutSeconds": 120
    },
    "VectorDb": {
      "Type": "Qdrant",
      "Url": "http://localhost:6333",
      "ApiKey": "",
      "CollectionPrefix": "aar",
      "Dimension": 1024,
      "PerProjectCollections": true,
      "FailOnIndexingFailure": false
    },
    "Rag": {
      "SmallFileThresholdBytes": 10240,
      "ChunkSizeTokens": 512,
      "ChunkOverlapPercent": 20,
      "TopK": 10,
      "MinSimilarityScore": 0.7,
      "MaxContextTokens": 8000
    }
  },
  
  "BlobStorage": {
    "Provider": "FileSystem",
    "BasePath": "./storage"
  },
  
  "QueueService": {
    "Provider": "InMemory"
  },
  
  "Tokenizer": {
    "Type": "Tiktoken",
    "Model": "gpt-4o"
  },
  
  "Chunker": {
    "MaxTokens": 1600,
    "OverlapTokens": 200,
    "MinTokens": 100
  },
  
  "Embedding": {
    "Provider": "AzureOpenAI",
    "DeploymentName": "text-embedding-3-small",
    "Dimensions": 1536,
    "BatchSize": 100,
    "UseMock": false
  },
  
  "_comment_vectorstore": "VectorStore - CosmosDB credentials come from Key Vault",
  "VectorStore": {
    "Provider": "InMemory",
    "CosmosEndpoint": "<FROM_KEY_VAULT_OR_USER_SECRETS>",
    "CosmosKey": "<FROM_KEY_VAULT_OR_USER_SECRETS>",
    "CosmosDatabase": "aar",
    "CosmosContainer": "chunks"
  },
  
  "Retrieval": {
    "MaxRetrievedChunks": 50,
    "TopK": 20,
    "SimilarityThreshold": 0.7,
    "MaxContextTokens": 12000,
    "EnableHierarchicalSummarization": true,
    "SummaryBucketSize": 5
  },
  
  "ModelRouter": {
    "SmallModel": "gpt-4o-mini",
    "LargeModel": "gpt-4o",
    "SmallModelThreshold": 4000,
    "SmallModelMaxOutput": 2000,
    "LargeModelMaxOutput": 8000
  },
  
  "Cache": {
    "EnableChunkCache": true,
    "EnableEmbeddingCache": true,
    "ChunkCacheDurationMinutes": 1440,
    "EmbeddingCacheDurationMinutes": 10080
  },
  
  "_comment_security": "Security documentation - see docs/MIGRATION_KEYVAULT.md for setup instructions"
}
